- en: Prompting Techniques for Stable Diffusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://machinelearningmastery.com/prompting-techniques-stable-diffusion/](https://machinelearningmastery.com/prompting-techniques-stable-diffusion/)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In all cases, generating pictures using Stable Diffusion would involve submitting
    a prompt to the pipeline. This is only one of the parameters, but the most important
    one. An incomplete or poorly constructed prompt would make the resulting image
    not as you would expect. In this post, you will learn some key techniques to construct
    a prompt and see how much a good prompt can create a good image.
  prefs: []
  type: TYPE_NORMAL
- en: '**Kick-start your project** with my book [Mastering Digital Art with Stable
    Diffusion](https://machinelearningmastery.com/mastering-digital-art-with-stable-diffusion/).
    It provides **self-study tutorials** with **working code**.'
  prefs: []
  type: TYPE_NORMAL
- en: Let’s get started.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4c258325c6731c83eea3d0eb983807d1.png)'
  prefs: []
  type: TYPE_IMG
- en: Prompting Techniques for Stable Diffusion
  prefs: []
  type: TYPE_NORMAL
- en: Photo by [Sangga Rima Roman Selia](https://unsplash.com/photos/zone-and-u-turn-road-signs-Y4EQtlfOLm4).
    Some rights reserved.
  prefs: []
  type: TYPE_NORMAL
- en: Overview
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'This post is in three parts; they are:'
  prefs: []
  type: TYPE_NORMAL
- en: Parameters Affecting the Output
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Characteristics of an Effective Prompt
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Emphasizing Keywords
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Parameters Affecting the Output
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Several parameters affect the output in Stable Diffusion. The model has a vast
    impact on the style of the drawing. The sampler and step count matters for the
    quality of the generation. But the prompt guides the content in the output.
  prefs: []
  type: TYPE_NORMAL
- en: 'The base Stable Diffusion models are generic for multiple uses. But some models
    are specifically trained for a particular style. For example, the “Anything” model
    will easily produce pictures in the style of Japanese anime, while “Realistic
    Vision” model gives photorealistic output. You can download these models from
    Hugging Face Hub or from Civitai (recommended):'
  prefs: []
  type: TYPE_NORMAL
- en: 'Anything: [https://civitai.com/models/9409](https://civitai.com/models/9409),
    [https://huggingface.co/stablediffusionapi/anything-v5](https://huggingface.co/stablediffusionapi/anything-v5)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Realistic Vision: [https://civitai.com/models/4201](https://civitai.com/models/4201),
    [https://huggingface.co/SG161222/Realistic_Vision_V6.0_B1_noVAE](https://huggingface.co/SG161222/Realistic_Vision_V6.0_B1_noVAE)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The models downloaded should be saved to the `models/Stable-diffusion` folder
    in your WebUI installation. When you download a model, besides the version of
    the model itself, note also the base model versions. The most common are SD 1.5
    and SDXL 1.0\. Using a different base model may cause compatibility issues with
    other parts of the pipeline, including how the prompts are understood.
  prefs: []
  type: TYPE_NORMAL
- en: In theory, the diffusion model requires hundreds of steps to generate an image.
    But the diffusion model is, in fact, a mathematical model that can be written
    as a differential equation; there are ways to solve the equation approximately.
    The sampler and the step count control how the approximate solution will be found.
    Generally speaking, the more steps you use, the more accurate the result is. However,
    the effect of step count depends on the sampler chosen. As a ballpark, most samplers
    should use around 20 to 40 steps for the best balance between quality and speed.
  prefs: []
  type: TYPE_NORMAL
- en: The prompt affects the output for a trivial reason. In every step, the U-net
    in Stable Diffusion will use the prompt to guide the refinement of noise into
    a picture. Different models understood the prompt differently, just as humans
    understand a word with different preconceptions. However, a general rule is that
    you should write the prompt in such a way that limits the room for reinterpretation.
    Let’s look into this with some examples.
  prefs: []
  type: TYPE_NORMAL
- en: Characteristics of an Effective Prompt
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A prompt should be specific and explicit in what needs to be in the picture.
    Having a list of keywords handy makes prompting a piece of cake. Let’s understand
    the different categories of keywords, and then we will look into examples in each
    category.
  prefs: []
  type: TYPE_NORMAL
- en: Subject or Object
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The core of a prompt lies in describing the details of the expected image. Therefore,
    it is important to imagine it first. Let’s understand this using a prompt example.
  prefs: []
  type: TYPE_NORMAL
- en: A young woman with an FC Barcelona jersey celebrating a goal with football players
    and a crowd in the background.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The various settings picked for generating the image are given below:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Model: Realistic Vision V6.0 B1 (VAE)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Sampling method: DPM++ 2M Keras'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Sampling steps: 20'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'CFG Scale: 7'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Width × Height: 512 × 512'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'A negative prompt: Will explain in subsequent sections'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Batch size and count: 1'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](../Images/654ce2cd0e0c69a8bae30951193ba949.png)'
  prefs: []
  type: TYPE_IMG
- en: Generating an image in Stable Diffusion using a prompt
  prefs: []
  type: TYPE_NORMAL
- en: Not bad for a first attempt.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/794e26ec2a06c42d673efea5651b5315.png)'
  prefs: []
  type: TYPE_IMG
- en: Generation using a simple prompt
  prefs: []
  type: TYPE_NORMAL
- en: Let’s enhance this further.
  prefs: []
  type: TYPE_NORMAL
- en: '**Note**: Image generation is a random process. Hence you may see a vastly
    different output. In fact, unless you fixed  the random seed, the image you generate
    each time with the same prompt and parameters will be different.'
  prefs: []
  type: TYPE_NORMAL
- en: Medium
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: How is the image created? Adding the medium of image creation makes the prompt
    even more **specific**. Whether the image is a photograph, a digital painting,
    a 3D rendering, or an oil painting is called the medium.
  prefs: []
  type: TYPE_NORMAL
- en: 'We can also add adjectives to it such as:'
  prefs: []
  type: TYPE_NORMAL
- en: Ultra-realistic photograph
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Portrait digital painting
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Concept art
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Underwater oil painting
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Let us add a medium to our prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: Ultra-realistic photography of a young woman with an FC Barcelona jersey celebrating
    a goal with football players and a crowd in the background.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Below are the results.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/9aa143046c534bbd2823206a540df0fe.png)'
  prefs: []
  type: TYPE_IMG
- en: Prompt with photography medium
  prefs: []
  type: TYPE_NORMAL
- en: Not much difference because the model used assumes a realistic, photography-like
    output by default. The difference will be more pronounced if a different model
    has been used.
  prefs: []
  type: TYPE_NORMAL
- en: Artistic Style
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Keywords such as modernist, impressionist, pop art, surrealist, art nouveau,
    hyperrealistic, and so on add an artistic angle to the image. Let’s understand
    this by modifying our prompt.
  prefs: []
  type: TYPE_NORMAL
- en: A pop art ultra-realistic portrait of a young woman with an FC Barcelona jersey
    celebrating a goal with football players and a crowd in the background.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Below are the results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/71560218725385e913684572f6488c33.png)'
  prefs: []
  type: TYPE_IMG
- en: Image generated with artistic style in the prompt
  prefs: []
  type: TYPE_NORMAL
- en: Limited by the model to keep it photograph-like, but the pop art style makes
    the output use more primary colors (red, yellow, blue) and the color change in
    the face is more abrupt.
  prefs: []
  type: TYPE_NORMAL
- en: Famous Artist Names
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Adding artist names picks the style of the artist. Multiple artist names can
    be mentioned to combine their styles. Let’s add the two artists’ names as Stanley
    Artgerm Lau, a superhero comic artist, and Agnes Martin, a Canadian-American abstract
    painter. A good reference for artist names can be found [here](https://stablediffusion.fr/artists).
  prefs: []
  type: TYPE_NORMAL
- en: A pop art ultra-realistic portrait of a young woman with an FC Barcelona jersey
    celebrating a goal with football players and a crowd in the background, by Stanley
    Artgerm Lau and Agnes Martin.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![](../Images/01a111d46b1a7ce54016d658965b5393.png)'
  prefs: []
  type: TYPE_IMG
- en: Added artist name to the prompt
  prefs: []
  type: TYPE_NORMAL
- en: Since multiple artist names are provided, the output can be creative.
  prefs: []
  type: TYPE_NORMAL
- en: Website
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Websites such as Artstation and Deviant Art have graphics of multiple genres.
    Adding these website names adds a style specific to them.
  prefs: []
  type: TYPE_NORMAL
- en: Let’s add “artstation” to our prompt.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a5320226818704a1e0f813cd92e8b605.png)'
  prefs: []
  type: TYPE_IMG
- en: By providing a website name to the prompt, some abstract background may be produced.
  prefs: []
  type: TYPE_NORMAL
- en: Resolution
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Adding resolution specifications such as highly detailed, HD, 4K, 8K, vray,
    unreal engine, or sharp focus helps get much more details in the image. Let’s
    try this out.
  prefs: []
  type: TYPE_NORMAL
- en: A pop art ultra-realistic portrait of a young woman with an FC Barcelona jersey
    celebrating a goal with football players and a crowd in the background, by Stanley
    Artgerm Lau and Agnes Martin, artstation, 4K, sharp focus.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![](../Images/7d11cdeedde176458dce53d3bb74e54a.png)'
  prefs: []
  type: TYPE_IMG
- en: Specifying 4K and sharp focus will emphasize the texture details
  prefs: []
  type: TYPE_NORMAL
- en: You may have notice that the prompt doesn’t need to be a sentence. You can also
    put in the keywords separated by comma. The embedding engine can understand it
    well.
  prefs: []
  type: TYPE_NORMAL
- en: Lighting
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Adding lighting keywords can enhance the look and feel of the scene. Examples
    include rim lighting, cinematic lighting, volumetric lighting, crepuscular rays,
    backlight, or dimly lit. So you can modify the prompt into:'
  prefs: []
  type: TYPE_NORMAL
- en: A pop art ultra-realistic portrait of a young woman with an FC Barcelona jersey
    celebrating a goal with football players and a crowd in the background, by Stanley
    Artgerm Lau and Agnes Martin, artstation, 4K, sharp focus, rim lighting.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![](../Images/4b131f8e68b113804fb2f7b5069276c2.png)'
  prefs: []
  type: TYPE_IMG
- en: Prompt with “rim lighting” will enhance the outline
  prefs: []
  type: TYPE_NORMAL
- en: If you are not familiar with photography, rim lighting is to set up light **behind**
    the subject such that the **rim** of the subject will be outlined by the light.
  prefs: []
  type: TYPE_NORMAL
- en: We can also use ControlNets or Regional Prompter to have much greater control.
  prefs: []
  type: TYPE_NORMAL
- en: Color
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The overall color tone of the image can be controlled using any color keyword.
  prefs: []
  type: TYPE_NORMAL
- en: A pop art ultra-realistic portrait of a young woman with an FC Barcelona jersey
    celebrating a goal with football players and a crowd in the background, by Stanley
    Artgerm Lau and Agnes Martin, artstation, 4K, sharp focus, rim lighting, cyan.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![](../Images/a1a048647746f657c0102221f825b59f.png)'
  prefs: []
  type: TYPE_IMG
- en: Adding “cyan” to the prompt will introduce more of such color to the output.
  prefs: []
  type: TYPE_NORMAL
- en: Ok, we can see some cyan in the images now. But since the prompt didn’t say
    “cyan shirt” or “cyan dye hair”, you left the room for reinterpretation so the
    color may appear anywhere.
  prefs: []
  type: TYPE_NORMAL
- en: Using Negative Prompts
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Rather than describing what should be in the image, the negative prompt is a
    way to describe what should not be present in the image. This can include attributes,
    objects, or styles. We can have a generic prompt like the one below for all our
    image-generation tasks. The good thing about negative prompt is that you can keep
    a standard template for negative prompt to reuse for many tasks. But some models
    (such as SD 2.0 or SD XL) are less dependent on the negative prompt.
  prefs: []
  type: TYPE_NORMAL
- en: (worst quality, low quality, normal quality, low-res, low details, oversaturated,
    undersaturated, overexposed, underexposed, grayscale, bw, bad photo, bad photography,
    bad art:1.4), (watermark, signature, text font, username, error, logo, words,
    letters, digits, autograph, trademark, name:1.2), (blur, blurry, grainy), morbid,
    ugly, asymmetrical, mutated malformed, mutilated, poorly lit, bad shadow, draft,
    cropped, out of frame, cut off, censored, jpeg artifacts, out of focus, glitch,
    duplicate, (airbrushed, cartoon, anime, semi-realistic, CGI, render, blender,
    digital art, manga, amateur:1.3), (3D,3D Game, 3D Game Scene, 3D Character:1.1),
    (bad hands, bad anatomy, bad body, bad face, bad teeth, bad arms, bad legs, deformities:1.3)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: We have already used this prompt in our generations so far.
  prefs: []
  type: TYPE_NORMAL
- en: Emphasizing Keywords
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We can let stable diffusion know if we want to emphasize some keywords within
    the prompt and to what extent. This can be achieved using the below methods:'
  prefs: []
  type: TYPE_NORMAL
- en: Use of Factor
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'We can modify a keyword’s weightage using the syntax (keyword: factor). The
    factor is the numeric value. Let’s try this in our example.'
  prefs: []
  type: TYPE_NORMAL
- en: 'A pop art ultra-realistic portrait of a young woman with an FC Barcelona jersey
    (celebrating: 2) a goal with football players and a crowd in the background, by
    Stanley Artgerm Lau and Agnes Martin, artstation, 4K, sharp focus, rim lighting,
    cyan.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![](../Images/1d9460620ad234efb1b154432e9e007e.png)'
  prefs: []
  type: TYPE_IMG
- en: Emphasizing the keyword “celebrating” in prompt
  prefs: []
  type: TYPE_NORMAL
- en: Not in the same line as the previous generations. Maybe the model has a different
    take on celebration. That’s also an example of why you need to experiment with
    the prompts.
  prefs: []
  type: TYPE_NORMAL
- en: Another way to add emphasis is the use of round brackets. It has the same effect
    as using a factor of 1.1\. We can also use double or triple brackets for higher
    emphasis.
  prefs: []
  type: TYPE_NORMAL
- en: '(keyword) is equivalent to (keyword: 1.1)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '((keyword)) is equivalent to (keyword: 1.21)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '(((keyword))) is equivalent to (keyword: 1.33)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Similarly, the effects of using multiple square brackets are:'
  prefs: []
  type: TYPE_NORMAL
- en: '[keyword] is equivalent to (keyword: 0.9)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[[keyword]] is equivalent to (keyword: 0.81)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[[[keyword]]] is equivalent to (keyword: 0.73)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Keyword Blending
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: As the name suggests, keyword blending can help combine the effects of multiple
    subjects at once. Popular ways of keyword blending are below.
  prefs: []
  type: TYPE_NORMAL
- en: '[keyword1 : keyword2: factor]'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '(keyword1: factor1), (keyword2: factor2)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Let’s use the second format in our prompt.
  prefs: []
  type: TYPE_NORMAL
- en: 'A pop art ultra-realistic portrait of a young woman, (Gal Gadot: 0.9), (Scarlett
    Johansson: 1.1), with an FC Barcelona jersey celebrating a goal with football
    players and a crowd in the background, by Stanley Artgerm Lau and Agnes Martin,
    artstation, 4K, sharp focus, rim lighting, cyan.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![](../Images/36c47e20a63700a672fef8f881f25aef.png)'
  prefs: []
  type: TYPE_IMG
- en: Controlling how the face should look like by prompting
  prefs: []
  type: TYPE_NORMAL
- en: That’s a good hybrid. It’s Marvel vs DC on the football field. However, it looks
    like the model completely forgot about the celebration, crowd, and player in the
    process. That can be improved by trying to create a prompt differently or rephrase
    it.
  prefs: []
  type: TYPE_NORMAL
- en: 'Finally, below is the effect of applying the same prompt, but to use the model
    Anything XL v5.0 instead. This is a model for anime or cartoon style. The difference
    should be very obvious:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a3421d3bcb6613c0d9a96c348208a97b.png)'
  prefs: []
  type: TYPE_IMG
- en: Cartoon style obtained by using the same prompt but a different model
  prefs: []
  type: TYPE_NORMAL
- en: To summarize, there is a lot to experiment with when it comes to prompting a
    stable diffusion generator and expertise can only come with practice. So keep
    practicing!
  prefs: []
  type: TYPE_NORMAL
- en: Further Readings
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Below are some resources that might help you in prompting:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Stable Diffusion page](https://wiki.installgentoo.com/wiki/Stable_Diffusion)
    from InstallGentoo wiki'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Data files](https://github.com/pharmapsychotic/clip-interrogator/tree/main/clip_interrogator/data)
    from the CLIP interrogator source code'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In this post, you learned how to create a prompt to make Stable Diffusion generate
    a picture you like. You learned that the key is to give a specific description
    of the picture. You should include in the prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The subject: What the main focus looks like. If a person describes the clothing,
    action, and pose, it would help a lot.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The medium and style: Tell if it is a photograph, a sketch, or a watercolor
    painting, for example'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Name of some artists or a website if you want it to be in a particular style
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Resolution and lighting: You get more details by giving 4K and sharp focus.
    Describing the lighting will show a different effect, too.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Other details: You can add more descriptive features to the prompt, including
    the main color or the angle'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The output provided by Stable Diffusion can vary a lot depending on many other
    parameters, including the model. You need to experiment to find the best generation.
  prefs: []
  type: TYPE_NORMAL
