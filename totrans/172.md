# 稳定扩散项目：创建插图

> 原文：[https://machinelearningmastery.com/stable-diffusion-project-creating-illustration/](https://machinelearningmastery.com/stable-diffusion-project-creating-illustration/)

许多人在工作中写作。并非所有人都是小说作家；有些人写技术文档、商业计划、新闻文章甚至博客帖子。在这些写作中，插图不是必需的，但通常是有益的。它们是文本的装饰、解释或视觉说明。然而，你可能不希望花费太多时间或没有绘画技能来创建插图。稳定扩散在这里帮助你！

在这篇文章中，你将看到如何使用稳定扩散来创建插图。完成这篇文章后，你将学到：

+   如何从文本中创建提示

+   如何调整提示以获得更好的插图

用我的书**[掌握稳定扩散数字艺术](https://machinelearningmastery.com/mastering-digital-art-with-stable-diffusion/)**来**启动你的项目**。它提供了**自学教程**和**有效的代码**。

让我们开始吧

![](../Images/319ea69d535ed69cb589740d52d63985.png)

稳定扩散项目：创建插图

图片来源：[Koushik Chowdavarapu](https://unsplash.com/photos/shallow-focus-photography-of-person-drawing-QNj_dwdljY8)。部分版权保留。

## 概述

这篇文章分为三部分：

+   项目想法

+   创建插图

+   面部细节

## 项目想法

插图是对文本的装饰。我们从以下故事开始：

> 一些将军正在攻击一座堡垒。将军们必须作为一个集体决定是攻击还是撤退；有些将军可能倾向于攻击，而其他将军则倾向于撤退。重要的是所有将军在共同决策上达成一致，否则少数将军的半心半意的攻击将变成溃败，效果比协调的攻击或协调的撤退更糟。
> 
> 问题复杂化在于存在背叛的将军，他们不仅可能投票支持次优策略，还可能有选择地投票。例如，如果有九位将军投票，其中四位支持攻击，四位支持撤退，第九位将军可能向支持撤退的将军投票撤退，而向其余将军投票攻击。那些收到第九位将军撤退票的将撤退，而其余将攻击（这可能对攻击者不利）。问题进一步复杂化在于将军们被物理分隔，必须通过信使发送投票，而信使可能无法送达投票或伪造虚假投票。

如果你对这个故事熟悉，它描述了[拜占庭将军问题](https://en.wikipedia.org/wiki/Byzantine_fault)。上述文本来自维基百科。你将创建一幅图像来配合上述文本。

## 创建插图

简单来说，你可以打开Stable Diffusion的Web界面，将故事作为正向提示输入并生成。但也存在一些问题。首先，故事可能包含不同的场景，而你只需要一个场景的插图。其次，描述没有针对提示进行优化。由于文本会被转换为扩散过程中的嵌入，你需要强调关键字，而语法正确的句子并不重要。第三，除了正向提示，你可能还需要一个负向提示。

将故事改写成适合用作提示的形式是第一步。ChatGPT或其他AI工具擅长改写。你可以在ChatGPT中使用以下提示开始：

> 以下是一个故事。请提取一个关键场景，并将其描述为Stable Diffusion生成插图的提示。如果适用，请同时描述相应的负向提示。
> 
> 故事：一群将军正在攻击一个堡垒。将军们必须集体决定是攻击还是撤退；有些人可能倾向于攻击，而另一些人则倾向于撤退。重要的是所有将军必须达成一致的决定，因为部分将军半心半意的攻击将变成溃败，比协调一致的攻击或撤退都要糟糕。问题因存在奸诈的将军而复杂化，他们不仅可能投票支持次优策略，还可能有选择性地这样做。例如，如果有九位将军投票，其中四位支持攻击，而另外四位支持撤退，第九位将军可能会向支持撤退的将军发送撤退的投票，而向其余将军发送攻击的投票。那些收到撤退投票的将军将会撤退，而其余将军则会攻击（这可能对攻击者不利）。问题进一步复杂化，因为将军们被物理分隔，必须通过可能无法传递投票或伪造虚假投票的信使来发送他们的投票。

响应将是：

> **Stable Diffusion的关键场景描述：**
> 
> 在一个戏剧性的时刻，九位将军在一个昏暗的战斗帐篷内紧张地站成一圈。气氛充满悬念，他们面临着是否攻击或撤退到即将到来的堡垒的关键决定。将军们正在深入讨论，有些人脸上带着决心的表情，而其他人则充满怀疑，反映出他们的冲突偏好。在场景中心，一位信使正被描绘为递送投票，他的出现增加了紧张感，将军们警惕地注视着他。背景中有地图和战斗计划贴在帐篷墙上，通过帐篷的开口可以看到远处堡垒的轮廓。将军们的表情和肢体语言传达了他们困境的严重性，暗示了潜在的背叛和即将到来的灾难性误通信威胁。
> 
> **负向提示：**
> 
> 避免描绘现代技术、未来元素和不现实或幻想的场景。这个场景不应包含任何超自然的元素或不合时宜的细节，比如计算机或现代制服。

![](../Images/86789154581e6cdf6406278154147904.png)

使用 ChatGPT 生成 Stable Diffusion 的提示。

只需将这两个生成的段落复制并粘贴到 Stable Diffusion Web UI 中作为正面和负面提示，你可能会得到这样的结果：

![](../Images/53829eca7e7f04243c53b8a6ef1f21cb.png)

通过使用 ChatGPT 建议的提示生成的 Stable Diffusion 生成的图片。

这是使用模型 [Deliberate](https://huggingface.co/XpucT/Deliberate) 生成的，生成设置为 768×512 像素。这个结果不错，但可能不是您想要的。首先，这个输出看起来像一张照片。如果你重复几次，你会看到可能会生成各种不同的风格，因为您从未提及您想要的风格！当然，您希望为更好的图片改进提示。

让我们再次求助于 ChatGPT，作为后续：

> 将正面提示的答案简化为更少的词语

然后你得到：

> **稳定扩散的正面提示：**
> 
> 一个昏暗的战争帐篷里，九位将军深入讨论是进攻还是撤退的问题。紧张的表情和身体语言反映了他们不同的偏好。一名信使递交了一张票，增加了紧张感。地图和战斗计划装饰着帐篷的墙壁，帐篷的开口处可以看到堡垒的轮廓。

![](../Images/d817a8f064a4d84276bbb121b23d30cb.png)

请求 ChatGPT 简化提示

您可以用这个更简短的版本替换您的正面提示。结果不应该有太大的区别。一个好的提示应该提到主要焦点、背景、构图和风格。这个提示缺乏后者。所以你可以修改提示以丰富这些细节。如果你想要一个看起来逼真的输出，添加关键词“逼真”应该起作用。

负面提示对于生成同样重要。我们还可以简化负面提示，只提供关键词即可。您还应该为负面提示添加一些样式关键词，以控制不希望出现的内容。一个例子如下：

> 现代技术、未来元素、幻想、超自然元素、素描、卡通、动漫、模型

输出如下：

![](../Images/9eeeaacd68e93e716161601f2c7f9123.png)

通过调整使用的提示改进稳定扩散的生成

## 面部细节

如果你希望图片非常真实，那么在图片中有很多人物的情况下很容易失败。这正是上面的屏幕截图中的情况：如果你更仔细地看每个人的脸，你会看到很多人的面部表情有一种扭曲的解剖学。这个问题可以修复，但不能通过提示来解决。

要安装[“ADetailer”插件](https://github.com/Bing-su/adetailer)到稳定扩散版本：进入扩展标签页，输入URL到“从URL安装”部分，然后重新启动Web UI。然后你可以在text2img控制中看到“ADetailer”部分。

重复提示，但这次你应该检查“ADetailer”以启用它，并确保检测器是“face_yolo8n.pt”。这将检测生成图片中的面部并运行修复以重新生成面部。您不需要在ADetailer插件中提供任何额外的提示，除非您希望为这些面部提供一些额外的细节。结果如下：

![](../Images/3bbadb6bff38fb607b35154d7a80476b.png)

从稳定扩散生成。注意面部看起来畸形。

![](../Images/20b8fb0efddbc0f724be365293ec92cc.png)

应用ADetailer插件后改进的图片。

这两幅图片是用固定的随机种子生成的，所以它们看起来很相似。但使用ADetailer插件，你会看到面部看起来更自然。现在你可以将生成的图片用作你的写作插图。

## 更多阅读

如果你想深入了解这个主题，本节提供了更多资源。

+   [拜占庭错误](https://en.wikipedia.org/wiki/Byzantine_fault)在维基百科上

+   [Hugging Face上的Deliberate模型](https://huggingface.co/XpucT/Deliberate)

+   [稳定扩散Web UI的ADetailer插件](https://github.com/Bing-su/adetailer)

## 摘要

在本文中，您体验了从文本中提取场景并将其转换为稳定扩散提示的工作流程。通过注意细节，您可以修改提示以生成适合作为文本插图的图片。您还了解到，稳定扩散Web UI的ADetailer扩展可以通过用更自然的面孔替换生成的面孔来帮助您制作更好的图片。
