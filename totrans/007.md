# 使用 ChatGPT 作为你的编程助手

> 原文：[https://machinelearningmastery.com/using-chatgpt-as-your-programming-assistant/](https://machinelearningmastery.com/using-chatgpt-as-your-programming-assistant/)

大型语言模型基本上是一种可以理解和生成文本的机器。根据训练方式，有时模型会生成文本之外的内容。ChatGPT 就是这样一个大型语言模型。如果你正确地提示它，它可以生成编程代码。在这篇文章中，你将学习如何让 ChatGPT 为你生成程序。具体来说，你将学习

+   如何让 ChatGPT 启动你的编程项目

+   如何使用 ChatGPT 作为你的编程助手

**开始使用并应用 ChatGPT**，请参考我的书 [Maximizing Productivity with ChatGPT](https://machinelearningmastery.com/productivity-with-chatgpt/)。它提供了**实际应用案例**和**提示示例**，旨在帮助你快速使用 ChatGPT。

让我们开始吧！[](../Images/491c72032f6cec5038964e7202550e28.png)

使用 ChatGPT 作为你的编程助手

由作者使用 Stable Diffusion 生成的图片。保留部分权利。

## 概述

本文分为两个部分，它们是：

+   启动编程项目

+   理解代码和生成函数片段

## 启动编程项目

让我们考虑一个简单的项目：你想设置一个 REST API 服务器，可以帮助你对提供的 URL 的整个网页进行“屏幕截图”。可选地，REST API 可以接受一个额外的电子邮件地址参数。在这种情况下，屏幕截图不会返回，而是通过电子邮件发送出去。

这是一个涉及多个组件的项目。你需要一些东西来充当 REST API 服务器，监听 HTTP 请求并作出响应。你还需要一些东西来获取 URL 并像普通网页浏览器一样截图。项目中还有一个逻辑，取决于是否提供了电子邮件地址；输出可以是返回的图像文件，也可以是发送附带附件的电子邮件。

如果你对如何创建 REST API 服务器不熟悉或不知道有哪些工具可用，你可以向 ChatGPT 请求帮助。只需将所有细节写入提示中并询问：

> 我需要创建一个 REST API 服务器，该服务器接受 URL 作为输入，将网页截图捕获为 JPEG 格式并作为输出返回。可选地，用户可以提供一个电子邮件地址作为附加输入。在这种情况下，截图应通过电子邮件发送而不是返回。你能帮我完成这个程序吗？

对此，ChatGPT 提出了以下建议：

> 当然！我可以帮助你。要创建一个 REST API 服务器，该服务器可以捕获网页截图并处理可选的电子邮件功能，你可以使用 Node.js 以及一些额外的包。以下是你可以遵循的步骤概述：
> 
> 1\. 设置一个新的 Node.js 项目并使用 npm 初始化：
> 
> 2\. 安装必要的包。你需要`express`作为API服务器，`puppeteer`用于捕获屏幕截图，`nodemailer`用于发送电子邮件：
> 
> 3\. 创建一个`index.js`文件，并使用Express设置基本的服务器：
> 
> 4\. 在`/screenshot`路由中，使用Puppeteer捕获网页截图，并相应地处理响应：
> 
> 5\. 为了处理带有截图附件的电子邮件发送，在`if (email)`块中添加以下代码：
> 
> 确保将`'your-email-service-provider'`、`'your-email@example.com'`和`'your-email-password'`替换为你实际的电子邮件服务提供商的详细信息。
> 
> 6\. 最后，启动服务器：
> 
> 现在，当你向`http://localhost:3000/screenshot?url={URL}`发起GET请求时，服务器将捕获提供的URL的屏幕截图。如果同时提供了电子邮件地址作为`email={EMAIL}`，服务器将通过电子邮件附件发送截图，而不是直接返回。
> 
> 记得处理错误并根据需要添加任何必要的错误检查或验证。
> 
> 就这样！你现在拥有一个基本的REST API服务器，它可以捕获网页截图并可选地通过电子邮件发送。根据你的需求，可以进一步完善它。

这是一个非常详细的结果，告诉你如何完成这个编程任务。响应涵盖了所有要求，但你应该注意，当你在提示中没有明确指定时，ChatGPT会为你做出一些设计决策，例如使用什么编程语言。

一开始考虑所有细节并不容易，但ChatGPT的特点允许你提供后续提示以修订答案，例如：

> 对于上述问题，我想使用Python和FastAPI作为Web框架，并使用Selenium进行Web浏览器自动化。你能重写这个吗？

ChatGPT 现在的响应变成了：

> 当然！这是使用Python、FastAPI作为Web框架和Selenium进行Web浏览器自动化的修订版解决方案。
> 
> 1\. 安装必要的包。你需要`fastapi`，用于运行服务器的`uvicorn`，以及用于管理Web驱动程序的`selenium`和`webdriver_manager`：
> 
> 2\. 创建一个名为`main.py`的新文件，并导入所需的模块：
> 
> 3\. 定义一个请求模型来处理输入数据：
> 
> 4\. 创建一个路由以捕获网页截图：
> 
> 5\. 使用Uvicorn启动服务器：
> 
> 现在，当你向`http://localhost:8000/screenshot?url={URL}`发起GET请求时，服务器将捕获提供的URL的屏幕截图。如果同时提供了电子邮件地址作为`email={EMAIL}`，你可以使用请求中的`email`字段处理带有截图附件的电子邮件发送。
> 
> 记得处理错误并根据需要添加任何必要的错误检查或验证。
> 
> 注意：此解决方案假设你在计算机上安装了Chrome。如果你使用的是其他浏览器，你需要相应地调整Web驱动程序。
> 
> 就是这样！你现在有了一个使用 Python、FastAPI 和 Selenium 的 REST API 服务器，用于捕获网页截图并处理可选的电子邮件功能。

你可以看到，你在后续提示中没有提供任何多余的细节，只是提到了“上述问题”，但 ChatGPT 可以准确地将 Node.js 实现“翻译”成 Python，并使用你指定的库。

这是一个很棒的结果，尽管你可能仍需打磨代码。一个例子是，浏览器屏幕大小肯定会影响网页的渲染，但由于你没有在提示中指定它应该是可调的，因此上述代码中尺寸是硬编码的。另一个需要打磨生成代码的潜在原因是捕捉其他编码风格问题或增加针对安全问题的防御措施。

总结来说，和其他用例一样，你在提示中提供的详细信息越清晰，对于获得有用的响应就越关键。在编程任务的情况下，明确列出细节至关重要。

+   目标是什么

+   输入和输出格式是什么

+   程序应该使用哪些工具

+   程序可能遇到的不同情况是什么，这些情况应该如何处理

## 理解代码和生成函数片段

有时，你想编写的不是一个大型程序，而是一个较小的函数。你可以要求 ChatGPT 使用类似于上述的提示生成一个函数，只是你需要指定输出格式，例如函数或类。

实际上，你也可以反向操作，即向 ChatGPT 提供代码并请求用英语解释它。这有时很有用，特别是为了破解其他人的代码。让我们考虑以下示例：

> 请解释以下代码的功能：

这个提示非常简单：只有一个关键字，“解释”。但要注意你如何向 ChatGPT 提供代码：使用反引号遵循 Markdown 的代码块语法来引用程序。这有助于识别哪些是你的指令，哪些不是。

尽管这不是一个很长的程序，但 ChatGPT 以非常详细的方式解释了代码。它还在高层次上识别了意图，即计算矩阵的行列式。以下是响应内容：

> 你提供的代码是一个递归实现，用于计算方阵的行列式，使用了拉普拉斯展开。
> 
> 下面是代码功能的逐步分解：
> 
> 1.  函数 `det` 接受两个参数：一个指向 2D 数组 (`float** a`) 的指针，表示矩阵，以及矩阵的大小 (`float k`)。
> 1.  
> 1.  它声明了一些变量：`s` 用于符号，`ret` 用于行列式值，`**b` 作为临时矩阵。
> 1.  
> 1.  它检查 `k` 是否等于 1。如果是，这意味着我们已经达到了 1×1 矩阵的基本情况，函数返回矩阵中的单个值，即行列式。
> 1.  
> 1.  如果 `k` 大于 1，则继续进行计算。
> 1.  
> 1.  它为临时矩阵`b`动态分配了大小为`k`x`k`的内存。
> 1.  
> 1.  它将`ret`初始化为0。
> 1.  
> 1.  它进入一个循环，遍历矩阵`a`的第一行的每一列。
> 1.  
> 1.  在循环内部，它将索引`m`和`n`重置为0。
> 1.  
> 1.  它进入一个嵌套循环，遍历矩阵`a`的每一个元素。
> 1.  
> 1.  在嵌套循环中，它将临时矩阵`b`中位置`m`,`n`的元素设置为0。
> 1.  
> 1.  它检查当前元素是否不在第一行（`i != 0`）和当前列（`j != c`）。
> 1.  
> 1.  如果元素不在第一行或当前列，它将矩阵`a`中的值复制到临时矩阵`b`的位置`m`,`n`。
> 1.  
> 1.  它根据`b`中下一个元素的位置更新索引`m`和`n`。
> 1.  
> 1.  在嵌套循环之后，它通过递归调用`det`函数，使用临时矩阵`b`和大小`k - 1`来计算子矩阵`b`的行列式。
> 1.  
> 1.  它将子矩阵的行列式乘以符号`s`（交替符号）。
> 1.  
> 1.  它将符号`s`乘以-1，以便为下一次迭代切换符号。
> 1.  
> 1.  它将符号、第一行中的元素（`a[0][c]`）以及子矩阵的行列式的乘积加到累加和`ret`中。
> 1.  
> 1.  循环继续到下一列。
> 1.  
> 1.  循环之后，它释放了为临时矩阵`b`的每一行分配的内存。
> 1.  
> 1.  它释放了为临时矩阵`b`分配的内存。
> 1.  
> 1.  最终，它返回计算出的行列式值`ret`。
> 1.  
> 总之，代码通过对第一行进行拉普拉斯展开，递归地计算方阵的行列式。它使用临时矩阵存储通过排除第一行和所选列获得的子矩阵。递归继续直到达到1×1矩阵的基本情况。

### 后续改进代码

这段代码乍看之下不容易理解。可能有办法让它更易读。的确，ChatGPT在这种情况下能做得很好，只需一个非常简单的后续提示：

> 你能重写这段代码以提高清晰度并添加注释吗？

这里的关键字是“提高清晰度”和“添加注释”。ChatGPT在回应中提供了如下内容：

> 当然！这里是经过修订的代码版本，包含解释每一步的注释：
> 
> 我在代码中每个重要部分上方添加了注释，以解释其功能。这应该使代码更易读，更易理解。

这个版本无疑更易读。

此外，你还可以要求更多，比如捕捉代码中的错误或潜在安全问题。让我们请ChatGPT生成一些单元测试代码：

> 你能给我几个单元测试用例以确保这个函数运行良好吗？

不需要进一步解释，以下是回应：

> 当然！以下是一些单元测试用例，以验证`determinant`函数的正确性：
> 
> 测试用例1：2×2矩阵
> 
> 测试用例2：3×3矩阵
> 
> 测试用例3：4×4矩阵
> 
> 这些测试用例覆盖了不同大小的矩阵（2×2、3×3 和 4×4），包括正的、负的和零行列式值。通过将计算出的行列式值与预期输出进行比较，你可以验证 `determinant` 函数是否正常工作。

但很明显，单元测试代码遗漏了一个边角情况：1×1 矩阵。这表明 ChatGPT 并不总是完美的。你应该仅将其作为助手而非替代品。你应该始终验证结果。

## 总结

在这篇文章中，你看到 ChatGPT 如何帮助你编程。它不仅可以在回应你的问题时生成代码，还能理解你提供的代码意图。具体来说，你已经了解到：

+   你可以使用 ChatGPT 为你的软件项目生成初始代码，或为函数生成测试代码

+   你可以要求 ChatGPT 解释代码给你

+   你可以利用 ChatGPT 对代码进行重构和清理
